<odoo>
    <data>
        <record id="view_stock_picking_search" model="ir.ui.view">
            <field name="name">view.stock.picking.search</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_internal_search"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='backorder']" position="after">
                    <separator/>
                    <filter name="delivery_agofer" string="Delivery Agofer" domain="[('shipping_type','=','delivery')]"/>
                    <filter name="customer_pick" string="Customer Pick" domain="[('shipping_type','=','pick')]"/>
                    <filter name="upload_late" string="Upload Late" 
                        domain="[('state','in',('assigned','waiting','confirmed')),('shipping_type','=','delivery'),('upload_date', '&lt;', current_date)]"/>
                    <filter name="delivery_late" string="Delivery Late" 
                        domain="[('state','in',('assigned','waiting','confirmed')),('shipping_type','=','delivery'),('delivery_date', '&lt;', current_date)]"/>
                    <filter name="pick_late" string="Pick Late" 
                        domain="[('state','in',('assigned','waiting','confirmed')),('shipping_type','=','pick'),('pick_date', '&lt;', current_date)]"/>
                </xpath>
                <xpath expr="//filter[@name='picking_type']" position="after">
                    <filter name="warehouse" string="Warehouse" domain="[]" context="{'group_by': 'warehouse_id'}"/>
                </xpath>
            </field>
        </record>

        <record id="view_stock_picking_tree" model="ir.ui.view">
            <field name="name">view.stock.picking.tree</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.vpicktree"/>
            <field name="arch" type="xml">
                <xpath expr="//tree" position="attributes">
                    <attribute name="decoration-danger">state in ('assigned','waiting','confirmed') and shipping_type == 'delivery' and delivery_date &lt; current_date</attribute>
                    <attribute name="decoration-warning">state in ('assigned','waiting','confirmed') and shipping_type == 'delivery' and upload_date &lt; current_date</attribute>
                </xpath>
                <xpath expr="//field[@name='scheduled_date']" position="attributes">
                    <attribute name="attrs">{'invisible':['|',('state','in',('done','cancel')),('shipping_type','!=',False)]}</attribute>
                </xpath>
                <xpath expr="//field[@name='date_deadline']" position="attributes">
                    <attribute name="attrs">{'invisible':['|',('state','in',('done','cancel')),('shipping_type','!=',False)]}</attribute>
                </xpath>
                <xpath expr="//field[@name='scheduled_date']" position="before">
                    <field name="incoterm" optional="hide"/>
                    <field name="shipping_type" optional="hide" attrs="{'invisible': [('shipping_type', '=', False)]}"/>
                    <field name="delivery_assistant" optional="hide" attrs="{'invisible': [('shipping_type','!=','delivery')]}"/>
                    <field name="delivery_bool" optional="hide" attrs="{'invisible': [('shipping_type','!=','delivery')]}"/>
                    <field name="pick_bool" optional="hide" attrs="{'invisible': [('shipping_type','!=','pick')]}"/>
                </xpath>
                <xpath expr="//field[@name='date_deadline']" position="after">
                    <field name="upload_date" optional="hide" attrs="{'invisible': [('shipping_type','!=','delivery')]}"/>
                    <field name="delivery_date" optional="hide" attrs="{'invisible': [('shipping_type','!=','delivery')]}"/>
                    <field name="pick_date" optional="hide" attrs="{'invisible': [('shipping_type','!=','pick')]}"/>
                </xpath>
            </field>
        </record>

        <record id="view_stock_picking_form" model="ir.ui.view">
            <field name="name">view.stock.picking.form</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='do_unreserve']" position="attributes">
                    <attribute name="groups">stock.group_stock_user</attribute>
                </xpath>
                <xpath expr="//button[@name='button_scrap']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//button[@name='action_cancel']" position="attributes">
                    <attribute name="groups">stock.group_stock_user</attribute>
                </xpath>
                <xpath expr="//header/field[@name='state']" position="before">
                    <button name="action_invoice" type="object" string="Create Invoice" class="oe_highlight" 
                        attrs="{'invisible': ['|',('state','!=','done'),('invoice_id','!=',False)]}"/>
                </xpath>
                <xpath expr="//field[@name='origin']" position="after">
                    <field name="invoice_id" readonly="True"/>
                </xpath>
                <xpath expr="//notebook/page[@name='extra']/group" position="inside">
                    <group string="Delivery Info" attrs="{'invisible': [('shipping_type','=',False)]}">
                        <field name="shipping_type" />
                        <field name="delivery_assistant" 
                            attrs="{'invisible': [('shipping_type','!=','delivery')]}"/>
                        <field name="delivery_bool" 
                            attrs="{'invisible': [('shipping_type','!=','delivery')]}"/>
                        <field name="upload_date" 
                            attrs="{'invisible': [('shipping_type','!=','delivery')], 'required': [('shipping_type','=','delivery'),('delivery_bool','=',False)]}"/>
                        <field name="delivery_date" 
                            attrs="{'invisible': [('shipping_type','!=','delivery')], 'required': [('shipping_type','=','delivery'),('delivery_bool','=',False)]}"/>
                        <field name="pick_bool" 
                            attrs="{'invisible': [('shipping_type','!=','pick')]}"/>
                        <field name="pick_date" 
                            attrs="{'invisible': [('shipping_type','!=','pick')], 'required': [('shipping_type','=','pick'),('pick_bool','=',False)]}"/>
                    </group>
                </xpath>
            </field>
        </record>

        <record id="action_delivery_agofer" model="ir.actions.act_window">
            <field name="name">Delivery Agofer</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_mode">tree,kanban,form,calendar</field>
            <field name="domain">[('shipping_type','=','delivery')]</field>
            <field name="context">{'contact_display': 'partner_address', 'default_company_id': allowed_company_ids[0]}</field>
            <field name="search_view_id" ref="stock.view_picking_internal_search"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No transfer found. Let's create one!
                </p><p>
                    Transfers allow you to move products from one location to another.
                </p>
            </field>
        </record>

        <record id="action_customer_pick" model="ir.actions.act_window">
            <field name="name">Customer Pick</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_mode">tree,kanban,form,calendar</field>
            <field name="domain">[('shipping_type','=','pick')]</field>
            <field name="context">{'contact_display': 'partner_address', 'default_company_id': allowed_company_ids[0]}</field>
            <field name="search_view_id" ref="stock.view_picking_internal_search"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No transfer found. Let's create one!
                </p><p>
                    Transfers allow you to move products from one location to another.
                </p>
            </field>
        </record>

        <menuitem id="menu_delivery_agofer" 
            name="Delivery Agofer" 
            parent="menu_parent_stock" 
            action="action_delivery_agofer" 
            sequence="1"/>

        <menuitem id="menu_customer_pick" 
            name="Customer Pick" 
            parent="menu_parent_stock" 
            action="action_customer_pick" 
            sequence="5"/>
    </data>
</odoo>